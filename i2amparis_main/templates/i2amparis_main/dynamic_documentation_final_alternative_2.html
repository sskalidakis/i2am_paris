{% load static %}
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <!-- BASICS -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>I2AMPARIS - Dynamic Documentation</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href={% static "main_theme/css/isotope.css " %} media="screen"/>
    <link rel="stylesheet" href={% static "main_theme/js/fancybox/jquery.fancybox.css" %} type="text/css"
          media="screen"/>
    <link rel="stylesheet" href={% static "main_theme/css/bootstrap.css" %}>
    <link rel="stylesheet" href={% static "main_theme/css/bootstrap-theme.css" %}>
    <link href={% static "main_theme/css/responsive-slider.css" %} rel="stylesheet">
    <link rel="stylesheet" href={% static "main_theme/css/animate.css" %}>
    <link rel="stylesheet" href={% static "main_theme/css/style.css" %}>

    <link rel="stylesheet" href={% static "main_theme/css/font-awesome.min.css" %}>
    <!-- skin -->
    <link rel="stylesheet" href={% static "main_theme/skin/default.css" %}>
    <link rel="stylesheet" href={% static "doc_css.css" %}>
    <style>
        .model-list svg {
            margin-right: 0.6em;
            margin-left: 0.6em;
            margin-top: 0.2em;
            margin-bottom: 0.2em;

        }

        .model-list svg {
            cursor: pointer;
        }

        .model-list svg text {
            fill: #777
        }

        .model-list rect {
            fill: rgba(77, 77, 77, 0.31);
            stroke: rgba(64, 64, 64, 0.75);
            stroke-width: 1;
        }

        .model-list svg:hover rect {
            fill: rgba(151, 174, 33, 0.8);
            stroke: #5e6d13e6;
            stroke-width: 2;
        }

        .model-list svg:hover text {
            fill: rgba(255, 255, 255, 0.91)
        }

        .model-list a.not-selected {
            opacity: 0.7;
        }

        .model-list a:hover {
            opacity: 1;
            cursor: pointer;
        }

        .model-list svg:hover {
            -webkit-animation-name: wiggle;
            -ms-animation-name: wiggle;
            -ms-animation-duration: 200ms;
            -webkit-animation-duration: 200ms;
            -webkit-animation-iteration-count: 1;
            -ms-animation-iteration-count: 1;
            -webkit-animation-timing-function: ease-in-out;
            -ms-animation-timing-function: ease-in-out;
        }

        .model-list a:hover {
            -webkit-animation-name: wiggle;
            -ms-animation-name: wiggle;
            -ms-animation-duration: 200ms;
            -webkit-animation-duration: 200ms;
            -webkit-animation-iteration-count: 1;
            -ms-animation-iteration-count: 1;
            -webkit-animation-timing-function: ease-in-out;
            -ms-animation-timing-function: ease-in-out;
        }

        @-webkit-keyframes wiggle {
            0% {
                -webkit-transform: rotate(1deg);
            }
            25% {
                -webkit-transform: rotate(-1deg);
            }
            50% {
                -webkit-transform: rotate(3deg);
            }
            75% {
                -webkit-transform: rotate(-0.5deg);
            }
            100% {
                -webkit-transform: rotate(0deg);
            }
        }

        @-ms-keyframes wiggle {
            0% {
                -ms-transform: rotate(0.5deg);
            }
            25% {
                -ms-transform: rotate(-0.5deg);
            }
            50% {
                -ms-transform: rotate(1deg);
            }
            75% {
                -ms-transform: rotate(-2.5deg);
            }
            100% {
                -ms-transform: rotate(0deg);
            }
        }

        @keyframes wiggle {
            0% {
                transform: rotate(1deg);
            }
            25% {
                transform: rotate(-1deg);
            }
            50% {
                transform: rotate(3deg);
            }
            75% {
                transform: rotate(-0.5deg);
            }
            100% {
                transform: rotate(0deg);
            }
        }

        .model-list svg {
            width: 8.6rem;
            height: 4rem;
        }

        .model-list svg rect {
            width: 8.6rem;
            height: 4rem;
        }

        .granularities img {
            margin: 0.2rem;
            width: 3.2em;
        }

        .tooltip-demo {
            box-shadow: none;
        }

        .model-list i.fa-info-circle:hover {
            cursor: help;
        }

        .model-list i.fa-info-circle {
            display: none;
        }

        .model-list a:hover i.fa-info-circle {
            display: inline-block;
        }

    </style>
    <script src="https://www.amcharts.com/lib/4/core.js"></script>
    <script src="https://www.amcharts.com/lib/4/maps.js"></script>
    <script src="https://www.amcharts.com/lib/4/geodata/worldLow.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
    <!-- =======================================================
      Theme Name: Green
      Theme URL: https://bootstrapmade.com/green-free-one-page-bootstrap-template/
      Author: BootstrapMade
      Author URL: https://bootstrapmade.com
    ======================================================= -->
</head>


<body>

<div class="header">
    <section id="header" class="appear">

        <div class="navbar navbar-fixed-top" role="navigation" data-0="background-color:rgba(52, 58, 64, 1)"
             data-300="background-color:rgba(0,0,0,1);">

            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="fa fa-bars color-white"></span>
                </button>
                <div class="wow fadeInUp mylogo" data-wow-offset="0" data-wow-delay="0.1s" href="main">
                    <a class="col-sm-2 col-md-2 col-xs-2" href="/main"><img src="/static/images/logo.png"
                                                                            style="width: 90%;height:90%"></a>
                    <a class="col-sm-9 col-md-9 col-xs-8"> </a>
                    <button onclick="goback()" class="button col-sm-1 col-md-1 col-xs-2"
                            style="padding:0 0.5em 0 0.5em;background-color: rgba(151, 174, 33, 0.8);color: white;line-height: 2.0em;position: relative;top:1em;right: 0.5em">
                        Back
                    </button>
                </div>
            </div>


            <!--/.navbar-collapse -->
        </div>

    </section>

</div>

<div class="main-page" style="margin-top: 115px">
    {#      <section id="header_empty" style="background-color: #53595f; height: 100px" ></section>#}
    <section id="section-main-content" style="width: 99%">
        <div class="main-content">
            <div class="row" style="margin-bottom: 1em">
                <h3 style="text-align: center ;margin-bottom: 1.0em; width:100%">
                    Models</h3>
                <div class="model-list tooltip-demo large"
                     style="overflow: auto;  text-align: center">
                    {% for model,json in buttons.items %}
                        {% if model == selected_model_name %}
                            <a class="col selected" data-link="{{ model }}"
                               style="overflow: visible; padding: 0;position: relative;display: inline-block;  margin: 0.2em 1em 0.2em 1em; width: 9em;vertical-align: top">
                            <i style="position: absolute;left: 1em;top:1em;font-size: 0.9em;z-index: 1050;color:#f7f7f7;"
                               class="fa fa-info-circle"></i>
                            {#                                    <i style="position: absolute;right: 0.6em;bottom:1.3em;font-size: 0.6em;color: #828f38"#}
                            {#                                       class="fa fa-check"></i>#}
                            <img class="selected"
                                 style="width:8em; margin: 0.5em 0.1em 0.5em 0.1em "
                                 src="/static/{{ sel_icons }}/colored/{{ json.icon }}"
                                 data-toggle="tooltip" data-placement="auto"
                                 title='<p>{{ json.description }}</p>'>
                        {% else %}
                            <a class="col not-selected" data-link="{{ model }}"
                               style="overflow: visible; padding: 0;position: relative;display: inline-block;  margin: 0.2em 1em 0.2em 1em; width: 9em;vertical-align: top ">
                            <i style="position: absolute;left: 1em;top:1em;color:#cfd0d2;font-size: 0.9em;z-index: 1050"
                               class="fa fa-info-circle"></i>
                            <img class="not-selected"
                                 style="width:8em; margin: 0.5em 0.1em 0.5em 0.1em "
                                 src="/static/{{ sel_icons }}/grey/{{ json.icon }}"
                                 data-toggle="tooltip" data-placement="auto"
                                 title='<p>{{ json.description }}</p>'>
                        {% endif %}
                    <div class="long_title"
                         style="font-weight:400;color:#777;font-size: 0.6em; text-align: center;line-height: 1.5em; margin-top: 0.5em;">{{ json.long_title }}</div>
                    </a>
                    {% endfor %}
                </div>
            </div>
            <div id="model-characteristics" class="row" style="margin: 1em">
                <div class="col-sm-12 col-md-6">
                    <h3 style="text-align: center">Geographic Coverage of {{ selected_model_title }}</h3>
                    <div style="height:29em" id="chartdiv"></div>
                    <div style="margin-top: 0.5em" class="row">

                        <div
                                style="font-size: 0.7em;margin: 1em;line-height: 1.1em;font-weight: 500">
                            <p>Note: Hover over the map to see the model's spatial coverage.</p>
                            <p><i class="fa fa-circle" style="color: #dfdfdf;margin-right: 0.5em"></i> Grey indicates
                                non-availability (i.e. areas not covered). </p>
                            <p><i class="fa fa-circle" style="color: #8a941f;margin-right: 0.5em"></i>Green colour
                                indicates national coverage (i.e. countries represented at the country-level.</p>
                            <p>For countries not represented with national granularity, same colour for multiple
                                countries indicates countries covered as part of the same region. Pop-up title on mouse
                                over each covered country displays Name of Region (Name of Country)</p>
                        </div>

                    </div>
                </div>
                <div class="container col-sm-12 col-md-6 categories granularities"
                     style="margin: 0;overflow: visible!important;z-index: 1;top:2em">
                    <div class="row">
                        <h4 class="col-sm-6 col-md-2"
                            style="display: inline-block; position:relative; font-size:0.9em;padding:0">Sectors</h4>
                        <div class="col-sm-6 col-md-10 tooltip-demo well"
                             style="display: inline-block; background:transparent; box-shadow:none">
                            {% for k,vv in granularities.Sectors.items %}
                                <img
                                    style="
                                   background: transparent; padding: 0;"
                                    {% if vv.is_enable == 'green' %}
                                    src="/static/{{ sel_icons }}/colored/{{ vv.icon }}"
                                    {% else %}
                                    src="/static/icons/grey/{{ vv.icon }}"
                                    {% endif %}
                                    class="muted"
                                    {% if vv.html == "" %} data-toggle="">
                                    {% elif vv.is_enable == 'grey' %} data-toggle="">
                                    {% else %}
                                        data-toggle="tooltip" title='{{ vv.html }}' >
                                    {% endif %}

                            {% endfor %}
                        </div>
                    </div>
                    <div class="row">
                        <h4 class="col-sm-6 col-md-2"
                            style="position:relative;  font-size:0.9em;  padding:0">Policy</h4>
                        <div class="col-sm-6 col-md-10 tooltip-demo well"
                             style="display: inline-block;background:transparent; box-shadow:none">
                            {% for k,vv in granularities.Policy.items %}
                                <img
                                        style="
                                       background: transparent; padding: 0;"
                                        {% if vv.is_enable == 'green' %}
                                        src="/static/{{ sel_icons }}/colored/{{ vv.icon }}"
                                        {% else %}
                                        src="/static/icons/grey/{{ vv.icon }}"
                                        {% endif %}
                                        class="muted"
                                        {% if vv.html == "" %} data-toggle="">
                                        {% elif vv.is_enable == 'grey' %} data-toggle="">
                                        {% else %}
                                            data-toggle="tooltip" title='{{ vv.html }}' >
                                        {% endif %}
                            {% endfor %}
                        </div>
                    </div>

                    <div class="row">
                        <h4 class="col-sm-6 col-md-2"
                            style=" position:relative;  font-size:0.9em;  padding:0">SDGs</h4>
                        <div class="col-sm-6 col-md-10 tooltip-demo well"
                             style="display: inline-block;background:transparent; box-shadow:none">
                            {% for k,vv in granularities.SDGs.items %}
                                <img
                                        style="
                                       background: transparent; padding: 0;"
                                        {% if vv.is_enable == 'green' %}
                                        src="/static/{{ sel_icons }}/colored/{{ vv.icon }}"
                                        {% else %}
                                        src="/static/icons/grey/{{ vv.icon }}"
                                        {% endif %}
                                        class="muted"
                                        {% if vv.html == "" %} data-toggle="">
                                        {% elif vv.is_enable == 'grey' %} data-toggle="">
                                        {% else %}
                                            data-toggle="tooltip" title='{{ vv.html }}' >
                                        {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    <div class="row">
                        <h4 class="col-sm-6 col-md-2"
                            style=" position:relative;  font-size:0.9em;  padding:0">Socio-Economics</h4>
                        <div class="col-sm-6 col-md-10 tooltip-demo well"
                             style="display: inline-block;background:transparent; box-shadow:none">
                            {% for k,vv in granularities.SocioEconomics.items %}
                                <img
                                        style="
                                       background: transparent; padding: 0;"
                                        {% if vv.is_enable == 'green' %}
                                        src="/static/{{ sel_icons }}/colored/{{ vv.icon }}"
                                        {% else %}
                                        src="/static/icons/grey/{{ vv.icon }}"
                                        {% endif %}
                                        class="muted"
                                        {% if vv.html == "" %} data-toggle="">
                                        {% elif vv.is_enable == 'grey' %} data-toggle="">
                                        {% else %}
                                            data-toggle="tooltip" title='{{ vv.html }}' >
                                        {% endif %}
                            {% endfor %}
                        </div>
                    </div>

                    <div class="row">
                        <h4 class="col-sm-6 col-md-2"
                            style=" position:relative;  font-size:0.9em; padding:0">
                            Mitigation-Adaptation Measures</h4>
                        <div class="col-sm-6 col-md-10 tooltip-demo well icons-list"
                             style="display: inline-block;background:transparent; box-shadow:none">
                            {% for k,vv in granularities.MitigationAdaptationMeasures.items %}
                                <img
                                        style="
                                       background: transparent; padding: 0;"
                                        {% if vv.is_enable == 'green' %}
                                        src="/static/{{ sel_icons }}/colored/{{ vv.icon }}"
                                        {% else %}
                                        src="/static/icons/grey/{{ vv.icon }}"
                                        {% endif %}
                                        class="muted"
                                        {% if vv.html == "" %} data-toggle="">
                                        {% elif vv.is_enable == 'grey' %} data-toggle="">
                                        {% else %}
                                            data-toggle="tooltip" title='{{ vv.html }}' >
                                        {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    <div class="row">
                        <h4 class="col-sm-6 col-md-2"
                            style=" position:relative;  font-size:0.9em;  padding:0">Emissions</h4>
                        <div class="col-sm-6 col-md-10 tooltip-demo well"
                             style="display: inline-block;background:transparent; box-shadow:none">
                            {% for k,vv in granularities.Emissions.items %}
                                <img
                                        style="
                                       background: transparent; padding: 0;"
                                        {% if vv.is_enable == 'green' %}
                                        src="/static/{{ sel_icons }}/colored/{{ vv.icon }}"
                                        {% else %}
                                        src="/static/icons/grey/{{ vv.icon }}"
                                        {% endif %}
                                        class="muted"
                                        {% if vv.html == "" %} data-toggle="">
                                        {% elif vv.is_enable == 'grey' %} data-toggle="">
                                        {% else %}
                                            data-toggle="tooltip" title='{{ vv.html }}' >
                                        {% endif %}
                            {% endfor %}
                        </div>
                    </div>

                </div>


            </div>
        </div>


    </section>
</div>
<a href="#header" class="scrollup"><i class="fa fa-chevron-up"></i></a>

<script src={% static "main_theme/js/modernizr-2.6.2-respond-1.1.0.min.js" %}></script>
<script src={% static "main_theme/js/jquery.js" %}></script>
<script src={% static "main_theme/js/jquery.easing.1.3.js" %}></script>
<script src={% static "main_theme/js/bootstrap.min.js" %}></script>
<script src={% static "main_theme/js/jquery.isotope.min.js" %}></script>
<script src={% static "main_theme/js/jquery.nicescroll.min.js" %}></script>
<script src={% static "main_theme/js/fancybox/jquery.fancybox.pack.js" %}></script>
<script src={% static "main_theme/js/skrollr.min.js" %}></script>
<script src={% static "main_theme/js/jquery.scrollTo.js" %}></script>
<script src={% static "main_theme/js/jquery.localScroll.js" %}></script>
<script src={% static "main_theme/js/stellar.js" %}></script>
<script src={% static "main_theme/js/responsive-slider.js" %}></script>
<script src={% static "main_theme/js/jquery.appear.js" %}></script>
<script src={% static "main_theme/js/grid.js" %}></script>
<script src={% static "main_theme/js/main.js" %}></script>
<script src={% static "main_theme/js/wow.min.js" %}></script>
<script>
    wow = new WOW({}).init();
</script>
<script src={% static "main_theme/contactform/contactform.js" %}></script>
<script>
    $(document).ready(function () {
        var stopClickSide = false;
        var stopClickHeading = false;
        $(".sidebar h4 a").on('click', function () {
            $(this).find('i.rotate').toggleClass("down");

        });

        $(".accordion button").on('click', function () {
            $(this).find('i.rotate').toggleClass("down");


        });
        $('#accordion_introduction').find('button').click();
        {#        $('li a').on('click', function () {#}
        {#            $('#main_bar .collapse.in').collapse('hide');#}
        {#            var x = this.href.split('#')[1];#}
        {#            $('#collapse_' + x).collapse('show');#}
        {#        });#}
        $('li span').on('click', function () {
            var x = $(this).siblings()[0].href.split('#')[1];
            var y = $(this).siblings()[0];
            close_all_collapses(x, y, move_to_collapse);

        });


        $('body').css('height', '100%');

        function close_all_collapses(x_to_open, y_to_move_to, callback) {
            $('#main_bar .collapse.in').not('#collapse_' + x_to_open).collapse('hide');
            setTimeout(function () {
                callback(y_to_move_to, x_to_open, open_chosen_collapse);
            }, 400);
        }

        function move_to_collapse(y_to_move_to, x_to_open, callback) {
            y_to_move_to.click();
            callback(x_to_open);
            y_to_move_to = null;
        }

        function open_chosen_collapse(x_to_open) {
            $('#accordion_' + x_to_open).find('button').click();

        }


    });


</script>

<script>
    function goback() {
        window.history.back();
    }
</script>

<script>
    $(document).ready(function () {
{#        $('.tooltip-demo.well').tooltip({#}
{#            html: true,#}
{#            selector: 'i[data-toggle=tooltip]',#}
{#            container: "#model-characteristics"#}
{#        });#}
{#        $('.tooltip-demo.large').tooltip({#}
{#            html: true,#}
{#            selector: 'svg[data-toggle=tooltip]',#}
{#            container: ".model-list"#}
{#        });#}
        $('.tooltip-demo.well').tooltip({
            html: true,
            selector: 'img[data-toggle=tooltip]',
            container: "#model-characteristics"
        });
        $('.tooltip-demo.large').tooltip({
            html: true,
            selector: 'img[data-toggle=tooltip]',
            container: ".model-list"
        });
        $(".model-list a img").click(function (event) {
            console.log('pressed link');
            window.location.href = "/dynamic_doc/" + $(this).parent().data('link') + "/?format={{ template_format }}#model-characteristics";
            // Do something
        });
        $(".model-list i.fa-info-circle").click(function (event) {
            console.log('pressed icon');
            window.location.href = "/detailed_model_doc#" + $(this).parent().data('link');
            // Do something
        });


    });
</script>
<script>
    am4core.ready(function () {

// Themes begin
        am4core.useTheme(am4themes_animated);
// Themes end

// Create map instance
        var chart = am4core.create("chartdiv", am4maps.MapChart);

// Set map definition
        chart.geodata = am4geodata_worldLow;

// Set projection
        chart.projection = new am4maps.projections.Mercator();

// Export
        chart.exporting.menu = new am4core.ExportMenu();

// Zoom control
        chart.zoomControl = new am4maps.ZoomControl();

        var homeButton = new am4core.Button();
        homeButton.events.on("hit", function () {
            chart.goHome();
        });

        homeButton.icon = new am4core.Sprite();
        homeButton.padding(7, 5, 7, 5);
        homeButton.width = 30;
        homeButton.icon.path = "M16,8 L14,8 L14,16 L10,16 L10,10 L6,10 L6,16 L2,16 L2,8 L0,8 L8,0 L16,8 Z M16,8";
        homeButton.marginBottom = 10;
        homeButton.parent = chart.zoomControl;
        homeButton.insertBefore(chart.zoomControl.plusButton);

// Center on the groups by default
        chart.homeZoomLevel = 1.5;
        chart.homeGeoPoint = {longitude: 10, latitude: 52};
        console.log({{ data|safe }});
        var groupData = {{ data|safe }};


// This array will be populated with country IDs to exclude from the world series
        var excludedCountries = [];

// Create a series for each group, and populate the above array
        groupData.forEach(function (group) {
            var series = chart.series.push(new am4maps.MapPolygonSeries());
            series.name = group.name;
            series.useGeodata = true;
            var includedCountries = [];
            group.data.forEach(function (country) {
                includedCountries.push(country.id);
                excludedCountries.push(country.id);
            });
            series.include = includedCountries;

            series.fill = am4core.color(group.color);

            // By creating a hover state and setting setStateOnChildren to true, when we
            // hover over the series itself, it will trigger the hover SpriteState of all
            // its countries (provided those countries have a hover SpriteState, too!).
            series.setStateOnChildren = true;
            series.calculateVisualCenter = true;

            // Country shape properties & behaviors
            var mapPolygonTemplate = series.mapPolygons.template;
            // Instead of our custom title, we could also use {name} which comes from geodata
            mapPolygonTemplate.fill = am4core.color(group.color);
            mapPolygonTemplate.fillOpacity = 0.8;
            mapPolygonTemplate.nonScalingStroke = true;
            mapPolygonTemplate.tooltipPosition = "fixed";

            mapPolygonTemplate.events.on("over", function (event) {
                series.mapPolygons.each(function (mapPolygon) {
                    mapPolygon.isHover = true;
                });
                event.target.isHover = false;
                event.target.isHover = true;
            });

            mapPolygonTemplate.events.on("out", function (event) {
                series.mapPolygons.each(function (mapPolygon) {
                    mapPolygon.isHover = false;
                })
            });

            // States
            var hoverState = mapPolygonTemplate.states.create("hover");
            hoverState.properties.fill = am4core.color(group.color);

            // Tooltip
            mapPolygonTemplate.tooltipText = group.name + " ({title})"; // enables tooltip
            // series.tooltip.getFillFromObject = false; // prevents default colorization, which would make all tooltips red on hover
            // series.tooltip.background.fill = am4core.color(group.color);

            // MapPolygonSeries will mutate the data assigned to it,
            // we make and provide a copy of the original data array to leave it untouched.
            // (This method of copying works only for simple objects, e.g. it will not work
            //  as predictably for deep copying custom Classes.)
            series.data = JSON.parse(JSON.stringify(group.data));
        });

// The rest of the world.
        var worldSeries = chart.series.push(new am4maps.MapPolygonSeries());
        var worldSeriesName = "world";
        worldSeries.name = worldSeriesName;
        worldSeries.useGeodata = true;
        worldSeries.exclude = excludedCountries;
        worldSeries.fillOpacity = 0.8;
        worldSeries.hiddenInLegend = true;
        worldSeries.mapPolygons.template.nonScalingStroke = true;


    }); // end am4core.ready()
</script>


</body>
</html>